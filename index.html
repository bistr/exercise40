<!DOCTYPE>
<html>
<head>
<script src="jquery-3.2.1.slim.min.js"></script>
<style>

@font-face {
    font-family: robotcho;
    src: url(robotcho.ttf);
}
	
body {
  background-color: black;
  font-family: robotcho;
  color: white;
  /*overflow:hidden; */
}

#credit{
position:absolute;
color:white;
font-size:10px;
top:620px;


}

#errorms{
  position:absolute;
   background:rgba(0,0,0,0.9);
   display: flex;
   justify-content: center;
   align-items: center;
   text-align:center;
   z-index:1;
   font-size:3em;
  left:-6px;
  padding:100px 15px 200px 15px;
  border-radius:5px;
  top:80px;
	}


header {
  background-color: #341E8A;
  padding: 30px 10px 45px 30px;
  margin: -30px -8px 0 -30px;
  font-size: 2em;
  color: white;
  text-shadow: 1px 3px rgba(0,0,0,0.7);

}

.container {
  align-items: center;
  flex-direction: column;
  margin-top: 30px;
}

.totheleft {
  float: left;
}

.totheright {
  float: right;
}

#question {
  font-size: 40px;
 text-align:center;
margin-bottom:20px;
}

ul {
margin-top:20px;
  list-style-type: none;
margin-left:-40px;


}

ul li div {
  margin-bottom:10px;
  text-align:center;
  padding:18px 5px;
  font-size:2em;
  text-shadow: 1px 2px rgba(0,0,0,0.5);
  border-radius:3px;


}

#yeah1{
    background-color:/*#11bb66; */ #03c857;
  }
  
  #yeah2{
    background-color:#11aabb;
  }
  
  #yeah3{
    background-color:#3377bb;
  }
  
  #yeah4{
    background-color:/*#5533dd;*/ #661be3;
  }	
	
#yeah1:active{
    background-color:#0A6E3C;
  }
  
  #yeah2:active{
    background-color:#0A646E;
  }
  
  #yeah3:active{
    background-color:#1E466E;
  }
  
  #yeah4:active{
    background-color:#382291;
  }	

</style>
</head>
<body><div class="container-fluid">
<header><span class="totheleft" id="cstracker">Score:<b>0</b></span><span class="totheright" id="pbtracker">Best:<b>0</b></span></header>



<div class="container">
<div id="question">Кой написва &quot;Под Игото?&quot;</div>

<div id="answerbox">
<div id="errorms"></div>
<ul>
        <li>
          <div id=yeah1 onclick="klik('1')"></div>
        </li>
        <li>
          <div id=yeah2 onclick="klik('2')"></div>
        </li>
        <li>
          <div id=yeah3 onclick="klik('3')"></div>
        </li>
        <li>
          <div id=yeah4 onclick="klik('4')"></div>
        </li>
</ul>
</div>
</div>
</div>
<script>var proizvgeroi={"Чичовци":["Иван Селамсъзът","Варлаам Копринарката"],"Под игото":["Бойчо Огнянов","Рада Госпожина","Соколов","чорбаджи Марко","Мичо Бейзадето","Кириак Стефчов","чорбаджи Йордан Диамандиев","Хаджи Ровоама"]}
proizvgeroi["Бай Ганьо"]=["Бай Ганьо","Дочоолу","Гочоолу","Иваница Граматиков"]
proizvgeroi["Ветрената мелница"]=["Христина","Лазар Дъбака","дядо Корчан"]
proizvgeroi["Косачи"]=["Лазо","Благолаж"]
proizvgeroi["Мечтатели"]=["Рустем","Акима"]
proizvgeroi["Задушница"]=["Станчо","Стоилка"]
proizvgeroi["На оня свят"]=["Дядо Матейко"]
proizvgeroi["Гераците"]=["Йордан Герака","Баба Марга","Божан","Петър","Павел","Йовка","Елка","Захаринчо","Матей Маргалака"]
proizvgeroi["Последна радост"]=["Люцкан","Цветана","Инженера"]
proizvgeroi["Шибил"]=["Шибил","Рада","Велико кехая"]
proizvgeroi["През чумавото"]=["Тиха","хаджи Драган","Величко"]
proizvgeroi["Индже"]=["Индже","Пауна","Найден Гърбавото","Сяро Барутчията"]
proizvgeroi["Песента на колелетата"]=["Сали Яшар","Джапар","Шакире"]
proizvgeroi["Албена"]=["Албена","Куцар","Нягул"]
proizvgeroi["Другоселец"]=["другоселецът","Торашко"]
proizvgeroi["Серафим"]=["Серафим","Павлина","Еньо"]
proizvgeroi["Тютюн"]=["Борис Морев","Ирина","Мария","татко Пиер","Костов","фон Гайер","Шишко","Варвара"]
proizvgeroi["Железният светилник"]=["Стоян Глаушев","Султана","Кочо","Лазар","Катерина","Климент Бенков","Рафе Клинче","Ния","Аврам Немтур","Божана","Андрей"]

var proizvavtori={}
proizvavtori["Христо Ботев"]=["Майце си","Към брата си","Елегия","Борба","До моето първо либе","На прощаване","Хаджи Димитър","Моята молитва","Обесването на Васил Левски"]
proizvavtori["Иван Вазов"]=["Българският език", "Отечество любезно", "При Рилския манастир","Елате ни вижте", "Линее нашто поколение","Опълченците на Шипка","Дядо Йоцо гледа","Чичовци","Под игото"]
proizvavtori["Алеко Константинов"]=['Бай Ганьо',"Разни хора, разни идеали"]
proizvavtori["Пенчо Славейков"]=["Cis moll", "Ни лъх не дъхва над полени", "Спи езерото; белостволи буки", "Самотен гроб в самотен кът", "Ралица"]
proizvavtori["Пейо Яворов"]=["Градушка", "Заточеници", "Ще бъдеш в бяло", "Две хубави очи","Стон", "Две души", "Сенки", "Песента на човека", "Маска"]
proizvavtori["Елин Пелин"]=["Ветрената мелница", "Косачи", "Задушница", "Мечтатели", "На оня свят", "Андрешко", "Чорба от греховете на отец Никодим", "Занемелите камбани","Гераците"]
proizvavtori["Димчо Дебелянов"]=["Черна песен", "Пловдив", "Да се завърнеш…", "Помниш ли, помниш ли..", "Спи градът", "Миг", "Един убит", "Сиротна песен", "Тиха победа"]
proizvavtori["Христо Смирненски"]=["Да бъде ден!", "Ний", "Йохан", "Юноша", "Стария музикант","Цветарка", "Зимни вечери"]
proizvavtori["Гео Милев"]=["Септември"]
proizvavtori["Атанас Далчев"]=["Прозорец", "Болница", "Стаята", "Къщата", "Повест", "Книгите","Камък", "Дяволско"]
proizvavtori["Елисавета Багряна"]=["Кукувица", "Стихии", "Потомка", "Вечната"]
proizvavtori["Йордан Йовков"]=["Песента на колелетата", "Последна радост", "Шибил", "През чумавото", "Индже", "Албена", "Другоселец", "Серафим"]
proizvavtori["Никола Вапцаров"]=["Вяра", "Писмо", "Песен за човека", "Сън","История", "Завод", "Кино", "Прощално", "Борбата е безмилостно жестока…"]
proizvavtori["Димитър Талев"]=["Железният светилник"]
proizvavtori["Димитър Димов"]=["Тютюн"]

//to si ebalo mamata ot rechnici. tva ^ ne go gledai

var vsichkiavtori=Object.keys(proizvavtori);
var vsichkiproizv=[];
for (var i in proizvavtori){
    vsichkiproizv=vsichkiproizv.concat(proizvavtori[i]);
};

var vsichkigeroi=[];
for (var i in proizvgeroi){
	vsichkigeroi=vsichkigeroi.concat(proizvgeroi[i]);
};

//time to get dirty
var rightanswer,quest,n,randi,str1="yeah",str2,goodid,tuktursi=[],cs=0,pb=0,clicked,choice;


function poznaiavtorproizv(){
  quest=vsichkiproizv[Math.floor(Math.random()*vsichkiproizv.length)];
  for(var t in proizvavtori){
    if (proizvavtori[t].indexOf(quest)!=-1){
      rightanswer=t;
    }
  }
  document.getElementById("question").innerHTML='Кой написва "'+ quest+'"?';
 tuktursi=vsichkiavtori.slice()
    tuktursi.splice(vsichkiavtori.indexOf(rightanswer),1);
}

function poznaiproizvgeroi(){
	quest=vsichkigeroi[Math.floor(Math.random()*vsichkigeroi.length)]
  for(var t in proizvgeroi){
  if (proizvgeroi[t].indexOf(quest)!=-1){
      rightanswer=t;
    }
  }
  document.getElementById("question").innerHTML="Откъде е "+ quest+"?";
  tuktursi=vsichkiproizv
    tuktursi.splice(vsichkiproizv.indexOf(rightanswer),1);
}

function poznaiavtorgeroi(){
	quest=vsichkigeroi[Math.floor(Math.random()*vsichkigeroi.length)]
  for(var t in proizvgeroi){
  if (proizvgeroi[t].indexOf(quest)!=-1){
      var rightanswer1=t;
    }
    for(var t in proizvavtori){
    if (proizvavtori[t].indexOf(rightanswer1)!=-1){
      rightanswer=t;
    }
  }
}
  document.getElementById("question").innerHTML="Чий герой е "+ quest+"?";
  tuktursi=vsichkiavtori.slice()
    tuktursi.splice(vsichkiavtori.indexOf(rightanswer),1);
}

function start(n){
  if (n==1){
    poznaiavtorproizv();
    
    
  }
  if (n==2){
    poznaiproizvgeroi();
    
  }
  if (n==3){
    poznaiavtorgeroi();
    
  }
  
  randi=Math.floor(Math.random()*4+1);
  str2=String(randi);
  goodid=str1.concat(str2);
  
  document.getElementById(goodid).innerHTML=rightanswer;
  
  for(var i=1;i<5;i++){
    if (i!=randi){
     choice= tuktursi[Math.floor(Math.random()*tuktursi.length)];
tuktursi.splice(tuktursi.indexOf(choice),1);
     document.getElementById("yeah"+String(i)).innerHTML=choice;
    }
  }
  tuktursi=[]
  choice=""
}

function klik(clicked){
  if (document.getElementById("yeah"+clicked).innerHTML==rightanswer){
    cs+=1
    if (cs>pb){
      pb+=1;
    }}
 else{
    cs=0;
      document.getElementById("errorms").innerHTML="Грешка! <br><br> Отговорът е " +rightanswer;
//   $("#errorms").fadeToggle(100);
//   setTimeout(function(){$("#errorms").fadeToggle(300);},750);
	 $("#errorms").show("slow");
	 setTimeout(function(){$("#errorms").hide("slow");},1000);
   
   
  }
  document.getElementById("cstracker").innerHTML="Score: <b>"+ cs+"</b>";
  document.getElementById("pbtracker").innerHTML="Best: <b>"+ pb+"</b>";

  localStorage.setItem("pb",pb)

  setTimeout(function(){start(Math.floor(Math.random()*3+1))},30)
  document.getElementById("cstracker").innerHTML="Score: <b>"+ cs+"</b>";
  document.getElementById("pbtracker").innerHTML="Best: <b>"+ pb+"</b>";

  }

if (localStorage.getItem("pb")){
	pb=parseInt(localStorage.getItem("pb"))
}
	
  document.getElementById("cstracker").innerHTML="Score: <b>"+ cs+"</b>";
  document.getElementById("pbtracker").innerHTML="Best: <b>"+ pb+"</b>";

$("#errorms").hide();

start(Math.floor(Math.random()*3+1));
    
</script>
</body>
</html>				
